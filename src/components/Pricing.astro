---
import Translate from "./Translate.astro";

const pricingTiers = [
  {
    name: "pricing.tiers.0.name",
    price: "750",
    features: [
      "pricing.tiers.0.features.0",
      "pricing.tiers.0.features.1",
      "pricing.tiers.0.features.2",
      "pricing.tiers.0.features.3",
      "pricing.tiers.0.features.4",
      "pricing.tiers.0.features.5",
    ],
  },
  {
    name: "pricing.tiers.1.name",
    price: "1500",
    features: [
      "pricing.tiers.1.features.0",
      "pricing.tiers.1.features.1",
      "pricing.tiers.1.features.2",
      "pricing.tiers.1.features.3",
      "pricing.tiers.1.features.4",
      "pricing.tiers.1.features.5",
      "pricing.tiers.1.features.6",
    ],
    popular: true,
  },
  {
    name: "pricing.tiers.2.name",
    price: "2500",
    features: [
      "pricing.tiers.2.features.0",
      "pricing.tiers.2.features.1",
      "pricing.tiers.2.features.2",
      "pricing.tiers.2.features.3",
      "pricing.tiers.2.features.4",
      "pricing.tiers.2.features.5",
      "pricing.tiers.2.features.6",
      "pricing.tiers.2.features.7",
    ],
  },
];
---

<section class="py-20 bg-secondary" id="precios">
  <div class="container">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-bold mb-4">
        <Translate key="pricing.title" />
      </h2>
      <p class="text-text-muted max-w-2xl mx-auto">
        <Translate key="pricing.description" />
      </p>
      <p class="text-text-muted mt-2">
        <Translate key="pricing.note" />
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      {
        pricingTiers.map((tier) => (
          <div class="pricing-card-wrapper">
            <div
              class={`card p-8 relative flex flex-col h-full ${tier.popular ? "border-2 border-accent" : ""}`}
            >
              {tier.popular && (
                <div class="popular-badge">
                  <Translate key="pricing.popular" />
                </div>
              )}
              <h3 class="text-2xl font-bold mb-4">
                <Translate key={tier.name} />
              </h3>
              <div class="text-4xl font-bold mb-6">{tier.price}â‚¬</div>
              <ul class="space-y-4 mb-8 flex-grow">
                {tier.features.map((feature) => (
                  <li class="flex items-center">
                    <svg
                      class="w-5 h-5 text-accent mr-2"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M5 13l4 4L19 7"
                      />
                    </svg>
                    <Translate key={feature} />
                  </li>
                ))}
              </ul>
              <a href="#contacto" class="btn-primary w-full text-center" onclick="if(typeof window.trackCTAClick === 'function') { window.trackCTAClick('Pricing CTA - Get Quote'); }">
                <Translate key="pricing.cta" />
              </a>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  .text-text-muted {
    color: var(--color-text-muted);
  }

  .bg-secondary {
    background-color: var(--color-secondary);
  }

  .pricing-card-wrapper {
    position: relative;
    height: 100%;
  }

  .popular-badge {
    position: absolute;
    top: 0;
    right: 0;
    background-color: var(--color-accent);
    color: white;
    padding: 0.25rem 1rem;
    border-radius: 0 0.5rem 0 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    transform: translateY(-1px);
    z-index: 1;
  }
</style>
